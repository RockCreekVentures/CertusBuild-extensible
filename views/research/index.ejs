<div class="container main-content">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <h1 class="text-center mb-4">CertusBuild Research Archive</h1>
            <p class="lead text-center mb-5">Explore the comprehensive research that underpins the CertusBuild platform development, from market analysis to user experience design.</p>

            <!-- Static Core Research Topics -->
            <h2 class="mb-3">Core Research Topics</h2>
            <div class="row g-4 mb-5">
                <!-- Market Analysis Card -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h3 class="card-title">
                                <i class="fas fa-chart-pie me-2 text-primary"></i>
                                Market & Competitor Analysis
                            </h3>
                            <p class="card-text">Comprehensive analysis of the construction management software market, including competitor evaluations, market trends, and opportunity assessment.</p>
                            <a href="/research/market-analysis" class="btn btn-outline-primary">View Analysis</a>
                        </div>
                    </div>
                </div>

                <!-- Technology Landscape Card -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h3 class="card-title">
                                <i class="fas fa-microchip me-2 text-primary"></i>
                                Technology Landscape
                            </h3>
                            <p class="card-text">Evaluation of current and emerging technologies relevant to construction management, including AI/ML capabilities, integration possibilities, and technology stack recommendations.</p>
                            <a href="/research/technology-landscape" class="btn btn-outline-primary">View Research</a>
                        </div>
                    </div>
                </div>

                <!-- UX Design Card -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h3 class="card-title">
                                <i class="fas fa-paint-brush me-2 text-primary"></i>
                                UX Research & Design
                            </h3>
                            <p class="card-text">User experience research findings, wireframes, mockups, and detailed design specifications for the CertusBuild platform interface.</p>
                            <a href="/research/ux-design" class="btn btn-outline-primary">View UX Design</a>
                        </div>
                    </div>
                </div>

                <!-- MVP Definition Card -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h3 class="card-title">
                                <i class="fas fa-rocket me-2 text-primary"></i>
                                MVP Definition
                            </h3>
                            <p class="card-text">Minimum Viable Product scoping, feature prioritization, development roadmap, and success metrics for initial platform release.</p>
                            <a href="/research/mvp-definition" class="btn btn-outline-primary">View MVP Plan</a>
                        </div>
                    </div>
                </div>

                <!-- Miscellaneous Assets Card -->
                <div class="col-md-6 mx-auto mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h3 class="card-title">
                                <i class="fas fa-file-alt me-2 text-success"></i>
                                Miscellaneous Assets
                            </h3>
                            <p class="card-text">Additional resources, tools, and supporting materials that contribute to the overall CertusBuild development process.</p>
                            <a href="/research/misc-assets" class="btn btn-outline-success">View Documents</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Research Materials -->
            <% if (typeof researchContent !== 'undefined' && researchContent.length > 0) { %>
                <h2 class="mb-3">Recent Research</h2>
                
                <!-- Latest 3 Research Materials -->
                <% 
                // Filter out core topics that we already have static pages for
                const coreTopics = ['market-analysis', 'technology-landscape', 'ux-design', 'mvp-definition', 'misc-assets'];
                const additionalContent = researchContent.filter(item => !coreTopics.includes(item.slug));
                const recentContent = additionalContent.slice(0, 3); // Get the 3 most recent items
                
                // Map appropriate icons based on filename/content
                const getIconForContent = (content) => {
                    const slug = content.slug.toLowerCase();
                    if (slug.includes('market') || slug.includes('competitor')) return 'fas fa-chart-pie';
                    if (slug.includes('tech')) return 'fas fa-microchip';
                    if (slug.includes('ux') || slug.includes('design')) return 'fas fa-paint-brush';
                    if (slug.includes('mvp') || slug.includes('product')) return 'fas fa-rocket';
                    if (slug.includes('finance') || slug.includes('economic')) return 'fas fa-dollar-sign';
                    if (slug.includes('user') || slug.includes('customer')) return 'fas fa-users';
                    if (slug.includes('data')) return 'fas fa-database';
                    if (slug.includes('workflow')) return 'fas fa-sitemap';
                    return 'fas fa-file-alt';
                };
                %>
                
                <% if (recentContent.length === 0) { %>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        No additional research materials found. New content will appear here automatically when added to the content directory.
                    </div>
                <% } else { %>
                    <div class="row g-4 mb-5">
                        <% recentContent.forEach(content => { %>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-header bg-light">
                                        <span class="badge bg-primary float-end">
                                            <i class="fas fa-calendar-alt me-1"></i>
                                            <%= content.createdDate.toLocaleDateString() %>
                                        </span>
                                        <h5 class="mb-0">New Research</h5>
                                    </div>
                                    <div class="card-body">
                                        <h3 class="card-title">
                                            <i class="<%= getIconForContent(content) %> me-2 text-primary"></i>
                                            <%= content.title %>
                                        </h3>
                                        <p class="card-text"><%= content.description %></p>
                                    </div>
                                    <div class="card-footer bg-white">
                                        <a href="/research/<%= content.slug %>" class="btn btn-outline-primary">
                                            View Content
                                        </a>
                                    </div>
                                </div>
                            </div>
                        <% }); %>
                    </div>
                <% } %>

                <!-- All Additional Materials -->
                <% if (additionalContent.length > 0) { %>
                    <h2 class="mb-3">All Research Materials</h2>
                    <div class="card">
                        <div class="card-header bg-light">
                            <h3 class="mb-0">Complete Research Library</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th scope="col">Title</th>
                                            <th scope="col">Category</th>
                                            <th scope="col">Added</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% additionalContent.forEach(content => { %>
                                            <tr>
                                                <td>
                                                    <i class="<%= getIconForContent(content) %> me-2 text-primary"></i>
                                                    <%= content.title %>
                                                </td>
                                                <td>
                                                    <% 
                                                    let category = "General Research";
                                                    const slug = content.slug.toLowerCase();
                                                    if (slug.includes('market') || slug.includes('competitor')) {
                                                        category = "Market Research";
                                                    } else if (slug.includes('tech')) {
                                                        category = "Technology";
                                                    } else if (slug.includes('ux') || slug.includes('user') || slug.includes('design')) {
                                                        category = "User Research";
                                                    } else if (slug.includes('mvp') || slug.includes('product')) {
                                                        category = "Product Planning";
                                                    } else if (slug.includes('finance') || slug.includes('economic')) {
                                                        category = "Financial Analysis";
                                                    }
                                                    %>
                                                    <%= category %>
                                                </td>
                                                <td><%= content.createdDate.toLocaleDateString() %></td>
                                                <td>
                                                    <a href="/research/<%= content.slug %>" class="btn btn-sm btn-outline-primary">
                                                        View
                                                    </a>
                                                </td>
                                            </tr>
                                        <% }); %>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                <% } %>
            <% } %>
        </div>
    </div>
</div>